import React, { useState } from 'react';
import './styles.scss';
import ExpandMoreIcon from '@mui/icons-material/ExpandMore';
import ExpandLessIcon from '@mui/icons-material/ExpandLess';
import { IExperience } from '../../@types';

interface ExperienceCardProps {
  experiences: IExperience[];
}

function ExperienceCard({ experiences }: ExperienceCardProps) {
  const [pageIndex, setPageIndex] = useState(0);

  const handleNextPage = () => {
    setPageIndex(pageIndex + 1);
  };

  const handlePrevPage = () => {
    setPageIndex(pageIndex - 1);
  };

  const startIndex = pageIndex * 5;
  const endIndex = Math.min(startIndex + 5, experiences.length);
  const slicedExperiences = experiences.slice(startIndex, endIndex);

  return (
    <div className="experience-card" style={{ display: 'flex' }}>
      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start' }}>
        {slicedExperiences.map((exp, index) => {
          if (index >= startIndex && index < endIndex) {
            return (
              <div key={exp.id}>
                <h1>{exp.company}</h1>
                {/* Render other experience details */}
              </div>
            );
          }
          return null;
        })}
        <div style={{ display: 'flex' }}>
          {pageIndex > 0 && (
            <button onClick={handlePrevPage} style={{ margin: '1em' }} type="submit">
              <ExpandLessIcon />
            </button>
          )}
          {endIndex < experiences.length && (
            <button onClick={handleNextPage} style={{ margin: '1em' }} type="submit">
              <ExpandMoreIcon />
            </button>
          )}
        </div>
      </div>
    </div>
  );
}

export default ExperienceCard;
